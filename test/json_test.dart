import 'package:flutter_hn/json.parsing.dart';
import 'package:test/test.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString =
        "[ 17855104, 17857079, 17855388, 17849546, 17856734, 17850338, 17857285, 17850648, 17858019, 17849907, 17857761, 17848935, 17848974, 17855045, 17844809, 17855789, 17856314, 17854065, 17857851, 17856700, 17853248, 17855556, 17853129, 17856110, 17849982, 17855227, 17856437, 17856945, 17857975, 17855335, 17850943, 17853077, 17852288, 17851018, 17852853, 17853796, 17848736, 17852194, 17852739, 17851964, 17851311, 17851941, 17857129, 17854506, 17850836, 17856682, 17851293, 17850616, 17848882, 17852486, 17851526, 17846356, 17851855, 17854701, 17850822, 17845460, 17856756, 17845565, 17852949, 17848324, 17854983, 17844670, 17842045, 17850432, 17844363, 17844973, 17849607, 17845937, 17846986, 17850908, 17853946, 17851957, 17850907, 17854943, 17853073, 17845334, 17850026, 17852380, 17850932, 17844329, 17850960, 17851943, 17848846, 17845215, 17853173, 17852298, 17851321, 17852913, 17855692, 17845341, 17852638, 17851385, 17845526, 17850624, 17845112, 17844542, 17852333, 17854773, 17846491, 17856061, 17850494, 17845696, 17844587, 17851278, 17841431, 17852623, 17848949, 17849364, 17848323, 17843553, 17840717, 17849120, 17852129, 17844072, 17854095, 17841368, 17847978, 17843293, 17846522, 17853654, 17851025, 17844526, 17845733, 17840321, 17844712, 17846335, 17839188, 17845766, 17849029, 17845288, 17847359, 17839970, 17855868, 17853964, 17845252, 17843720, 17844573, 17848825, 17854014, 17841819, 17844245, 17845667, 17835760, 17840246, 17844561, 17845883, 17846290, 17844301, 17844812, 17855711, 17854407, 17854357, 17846387, 17844864, 17849489, 17852254, 17848159, 17845411, 17840219, 17852372, 17837035, 17840596, 17850003, 17839651, 17845963, 17856019, 17855206, 17842327, 17845527, 17843615, 17851921, 17839542, 17845085, 17843371, 17846798, 17843298, 17841480, 17841548, 17844143, 17845678, 17845991, 17834274, 17849190, 17849871, 17842566, 17846052, 17834266, 17839935, 17850955, 17848336, 17854457, 17844350, 17846498, 17856804, 17841628, 17851511, 17843343, 17846940, 17841584, 17839529, 17843885, 17843323, 17840275, 17842658, 17834799, 17836137, 17855112, 17841407, 17842372, 17846341, 17853110, 17845458, 17834322, 17840665, 17854841, 17841566, 17840672, 17845839, 17837383, 17837044, 17843240, 17843446, 17839696, 17836944, 17848887, 17848590, 17838161, 17837534, 17834675, 17844196, 17848199, 17846174, 17842553, 17851245, 17840163, 17842400, 17838887, 17838572, 17843353, 17845472, 17845289, 17835189, 17850184, 17842902, 17836993, 17837295, 17849933, 17845927, 17851093, 17845150, 17837870, 17853755, 17836343, 17853023, 17850641, 17849448, 17847668, 17840024, 17834514, 17835430, 17842057, 17840734, 17834380, 17846669, 17845614, 17843990, 17838448, 17848749, 17839768, 17838722, 17842482, 17840394, 17834930, 17851430, 17837250, 17841610, 17838257, 17847483, 17841832, 17849184, 17841712, 17851108, 17843432, 17847253, 17849327, 17843829, 17839823, 17841300, 17839171, 17847011, 17846897, 17847325, 17846072, 17835307, 17846921, 17835531, 17846839, 17848865, 17839665, 17835225, 17838861, 17835675, 17834580, 17834721, 17838891, 17840897, 17841589, 17844674, 17846716, 17845405, 17837469, 17834437, 17834427, 17836570, 17839489, 17836191, 17839810, 17844513, 17835925, 17839127, 17840347, 17848430, 17848353, 17838617, 17841356, 17843447, 17839329, 17845242, 17844483, 17845128, 17835990, 17840003, 17845924, 17839295, 17841425, 17843673, 17834596, 17842401, 17838764, 17841914, 17842622, 17845519, 17839174, 17836856, 17840678, 17835761, 17834977, 17839405, 17846318, 17841716, 17838176, 17841833, 17856209, 17841671, 17842376, 17840090, 17836985, 17841332, 17840089, 17839468, 17836404, 17840739, 17839030, 17835312, 17838293, 17837692, 17837631, 17845185, 17839876, 17838667, 17838537, 17848477, 17841641, 17836686, 17844881, 17834452, 17839091, 17843227, 17838110, 17837395, 17836031, 17841285, 17835003, 17856508, 17840775, 17835615, 17850233, 17836594, 17843339, 17845349, 17852522, 17852029, 17855661, 17840383, 17841213, 17843825, 17837670, 17840303, 17835871, 17841110, 17838319, 17837108, 17854405 ]";

    expect(parseTopStories(jsonString).first, 17855104);
  });

  test("parses topstories.json", () {
    const jsonString = """{"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8952,8917,8884,8887,8943,8869,8940,8908,8958,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}""";

    expect(parseArticle(jsonString).by, "dhouston");
  });
}
